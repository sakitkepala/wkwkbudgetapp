(this["webpackJsonpwkwkbudget-with-cra"]=this["webpackJsonpwkwkbudget-with-cra"]||[]).push([[0],{116:function(e,a,t){0},131:function(e,a,t){"use strict";t.r(a);t(116);var n=t(0),r=t.n(n),c=t(55),i=t.n(c),s=t(54),u=t(168),o=t(74),d=t(167),j=t(17),l=t(155),b=t(151),O=t(6),h=t(48),x=t(150),p=t(152),f=t(153),g=t(154),m=t(156),k=t(2),v=[{href:"/u/budget",teks:"Bajet"},{href:"/u/dana",teks:"Akun Dana"}];function w(e){var a=e.href,t=e.children,n=Object(h.a)(e,["href","children"]);return a?Object(k.jsx)(x.a,Object(O.a)(Object(O.a)({as:s.b,to:a},n),{},{children:t})):Object(k.jsx)(x.a,Object(O.a)(Object(O.a)({},n),{},{children:t}))}function y(){return Object(k.jsxs)(b.a,{as:"header",justifyContent:"space-between",h:"14",px:"16",color:"gray.400",children:[Object(k.jsx)(p.a,{className:"logo",children:Object(k.jsxs)(w,{href:"/u/dashboard",children:[Object(k.jsx)(f.a,{}),Object(k.jsx)(g.a,{})]})}),Object(k.jsx)(C,{}),Object(k.jsx)(l.a,{className:"menu",children:Object(k.jsxs)(w,{children:[Object(k.jsx)(m.a,{})," \u2193"]})})]})}function C(e){return Object(k.jsx)(p.a,Object(O.a)(Object(O.a)({className:"nav-menu-list",top:"12",left:"16",fontSize:"sm",textTransform:"uppercase",color:"gray.400"},e),{},{children:v.map((function(e,a){var t=e.href,n=e.teks;return Object(k.jsxs)(w,{href:t,mx:"4",children:[n," \u2192"]},t)}))}))}var T=t(3),S=t(21),E=t(103),R=t(159),A=t(157),D=t(169),N=t(110),P=t(173);function L(e){var a=e.onSimpanAkun,t=r.a.useState(null),n=Object(T.a)(t,2),c=n[0],i=n[1],s=r.a.useState(""),u=Object(T.a)(s,2),o=u[0],d=u[1],j=r.a.useState(""),b=Object(T.a)(j,2),O=b[0],h=b[1];return Object(k.jsxs)(p.a,{flexDirection:"column",alignItems:"center",pt:"24",children:[Object(k.jsx)(A.a,{w:"600px",color:"gray.500",children:"Hai! Kamu butuh akun dulu buat siapkan dana, nih, sebelum bisa budgeting. Kamu bisa tambahkan akun lewat form di bawah."}),Object(k.jsxs)(l.a,{w:"600px",mt:"12",p:"12",pt:"8",rounded:"md",shadow:"base",bgColor:"white",children:[Object(k.jsx)(E.a,{as:"fieldset",isRequired:!0,children:Object(k.jsx)(N.a,{id:"akun-jenis",name:"akun-jenis",value:c,onChange:function(e){i(e),d("tunai"===e?"Tunai":O)},children:Object(k.jsxs)(D.a,{direction:"row",children:[Object(k.jsx)(P.a,{value:"bank",children:"Bank"}),Object(k.jsx)(P.a,{value:"tunai",children:"Tunai"})]})})}),Object(k.jsx)(E.a,{as:"fieldset",children:Object(k.jsx)(R.a,{id:"akun-nama",name:"akun-nama",isDisabled:"tunai"===c,variant:"tunai"===c?"filled":"outline",value:o,onChange:function(e){d(e.target.value),"bank"===c&&h(e.target.value)},placeholder:"misal... Jenius"})}),Object(k.jsx)(E.a,{as:"fieldset",children:Object(k.jsx)(R.a,{id:"akun-dana",name:"akun-dana",placeholder:"Rp ...",onKeyDown:function(e){if("Enter"===e.key||"Enter"===e.code||"13"===e.keyCode){var t={jenis:c,nama:o,dana:e.target.value};console.log("submit enter gan"),console.log("data",t),a((function(e){return e?[].concat(Object(S.a)(e),[o]):[o]}))}}})})]})]})}var B=t(13),H=t(59),I=t(165),K=t(162),z=t(163),J=t(164),W=t(160),G=t(166),M=t(171),F=t(172),Q=t(161),q=t(29),U=t.n(q),V=t(44),X=t(170),Y=t(174);function Z(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=a.data,n=Object(h.a)(a,["data"]),r={method:"GET"},c=Object(O.a)(Object(O.a)({},r),{},{body:t?JSON.stringify(t):void 0},n);return fetch(e,c).then(function(){var e=Object(V.a)(U.a.mark((function e(a){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:if(t=e.sent,!a.ok){e.next=7;break}return e.abrupt("return",t);case 7:return e.abrupt("return",Promise.reject({message:"tidak ok"}));case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())}function $(e){var a=e.line,t=e.ml,r=(e.mr,Object(W.a)()),c=r.onOpen,i=r.onClose,s=r.isOpen,u=n.useState(a.dianggarkan),d=Object(T.a)(u,2),j=d[0],l=d[1],b=function(){var e=Object(o.b)();return Object(Y.a)(function(){var e=Object(V.a)(U.a.mark((function e(a){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z("/budgetLine/".concat(a.id),{method:"PUT",data:a});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),{onSuccess:function(a){var t=["budget-lines","Desember"],n=e.getQueryData(t);e.setQueryData(t,n.map((function(e){return e.id===a.id?a:e})))}})}().mutate,O=n.useRef();n.useEffect((function(){s&&l(a.dianggarkan)}),[s,a.dianggarkan]);return Object(k.jsxs)(G.a,{placement:"top",initialFocusRef:O,isOpen:s,onOpen:c,onClose:i,children:[Object(k.jsx)(G.g,{children:Object(k.jsx)(M.a,{size:"xs",ml:t,children:Object(k.jsx)(Q.a,{})})}),Object(k.jsx)(F.a,{children:Object(k.jsxs)(G.e,{p:"2",pt:"6",bgColor:"gray.200",children:[Object(k.jsx)(G.b,{bgColor:"gray.200"}),Object(k.jsx)(G.c,{children:Object(k.jsx)(R.a,{ref:O,placeholder:"misalnya... 1 000 000,00",bgColor:"gray.100",value:j,onChange:function(e){var a=Number(e.target.value);l(a)}})}),Object(k.jsx)(G.f,{children:Object(k.jsx)(M.a,{size:"sm",colorScheme:"green",onClick:function(e){j!==a.dianggarkan&&b({id:a.id,dianggarkan:j}),i()},children:"Simpan"})}),Object(k.jsx)(G.d,{})]})})]})}var _=n.forwardRef((function(e,a){var t=e.indeterminate,r=Object(h.a)(e,["indeterminate"]),c=n.useRef(),i=a||c;return n.useEffect((function(){i.current.indeterminate=t}),[i,t]),Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("input",Object(O.a)({type:"checkbox",ref:i},r))})}));function ee(e){var a=e.dianggarkan,t=void 0===a?0:a,n=e.terpakai,r=t-(void 0===n?0:n);return Object(k.jsx)("span",{children:r})}function ae(e){var a=e.children;return Object(k.jsx)(l.a,{as:"main",w:"100%",pt:"4",pb:"12",borderRadius:"md",shadow:"base",bgColor:"white",children:a})}function te(e){var a={data:e.data,columns:n.useMemo((function(){return[{id:"expander",Header:function(e){var a=e.getToggleAllRowsExpandedProps;return Object(k.jsx)(B.a.span,Object(O.a)(Object(O.a)({},a()),{},{children:Object(k.jsx)(K.a,{})}))},Cell:function(e){var a=e.row;return a.canExpand&&Object(k.jsx)(B.a.span,Object(O.a)(Object(O.a)({},a.getToggleRowExpandedProps()),{},{children:a.isExpanded?Object(k.jsx)(z.a,{}):Object(k.jsx)(J.a,{})}))}},{Header:"Kategori",accessor:"kategori"},{Header:"Dianggarkan",accessor:"dianggarkan",isNumeric:!0},{Header:"Terpakai",accessor:"terpakai",isNumeric:!0},{Header:"Tersedia",accessor:"tersedia",isNumeric:!0,Cell:function(e){var a=e.row.values,t=a.dianggarkan,n=a.terpakai;return Object(k.jsx)(ee,{dianggarkan:t,terpakai:n})}}]}),[])},t=Object(H.useTable)(a,H.useGroupBy,H.useExpanded,H.useRowSelect,(function(e){e.visibleColumns.push((function(e){return[{id:"seleksi",Header:function(e){var a=e.getToggleAllRowsSelectedProps;return Object(k.jsx)("div",{children:Object(k.jsx)(_,Object(O.a)({},a()))})},Cell:function(e){var a=e.row;return Object(k.jsx)("div",{children:Object(k.jsx)(_,Object(O.a)({},a.getToggleRowSelectedProps()))})}}].concat(Object(S.a)(e))}))})),r=t.getTableProps,c=t.getTableBodyProps,i=t.headerGroups,s=t.rows,u=t.prepareRow;return Object(k.jsx)(ae,{children:Object(k.jsxs)(I.a,Object(O.a)(Object(O.a)({},r()),{},{children:[Object(k.jsx)(I.e,{children:i.map((function(e){return Object(k.jsx)(I.f,Object(O.a)(Object(O.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(k.jsx)(I.d,Object(O.a)(Object(O.a)({},e.getHeaderProps()),{},{isNumeric:e.isNumeric,children:e.render("Header")}))}))}))}))}),Object(k.jsx)(I.b,Object(O.a)(Object(O.a)({},c()),{},{children:s.map((function(e){return u(e),Object(k.jsx)(I.f,Object(O.a)(Object(O.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(k.jsxs)(I.c,Object(O.a)(Object(O.a)({},e.getCellProps()),{},{isNumeric:e.column.isNumeric,children:[e.render("Cell")," ","dianggarkan"!==e.column.id?null:Object(k.jsx)($,{line:e.row.original,ml:"2"})]}))}))}))}))}))]}))})}function ne(){return Object(k.jsx)(l.a,{as:"aside",className:"info",w:"40%",px:"40px",py:"12px",color:"gray.500",children:Object(k.jsx)(A.a,{children:"To be developed..."})})}function re(e){var a=e.children;return Object(k.jsx)(l.a,{as:"main",w:"100%",p:"12",borderRadius:"md",shadow:"base",bgColor:"white",textAlign:"center",children:a})}function ce(e){var a=e.children;return Object(k.jsx)(l.a,{as:"main",w:"100%",p:"12",borderRadius:"md",shadow:"base",bgColor:"white",textAlign:"center",children:Object(k.jsx)("pre",{children:a})})}function ie(e){var a=e.budgetLines,t=a.isLoading,n=a.isError,r=a.error,c=a.data;return Object(k.jsxs)(l.a,{display:"flex",w:"full",mt:"72px",px:"16",children:[t?Object(k.jsx)(re,{children:"Loading..."}):n?Object(k.jsx)(ce,{children:(null===r||void 0===r?void 0:r.message)||"Ada error, tidak bisa tarik datanya."}):Object(k.jsx)(te,{data:c}),Object(k.jsx)(ne,{})]})}var se={total:0,dipakai:0,sisa:0};function ue(e,a){var t=a.total,n=a.dipakai;switch(a.type){case"TOTAL":return t===e.total?e:Object(O.a)(Object(O.a)({},e),{},{total:t,sisa:t-e.dipakai});case"DIPAKAI":return n===e.dipakai?e:Object(O.a)(Object(O.a)({},e),{},{dipakai:n,sisa:e.total-n});default:return console.error("Tipe dispatch gak disupport."),e}}function oe(e){return Object(k.jsx)(l.a,Object(O.a)(Object(O.a)({className:"display-bulan",textTransform:"uppercase",fontSize:"2xl",color:"gray.300"},e),{},{children:e.children}))}var de=function(e,a){return e.length>0?e.reduce((function(e,t){return e+t[a]}),0):0};function je(e){var a=e.danaLines,t=e.budgetLines,c=function(){var e=r.a.useReducer(ue,se),a=Object(T.a)(e,2),t=a[0],n=a[1],c=r.a.useCallback((function(e){return n({type:"TOTAL",total:e})}),[]),i=r.a.useCallback((function(e){return n({type:"DIPAKAI",dipakai:e})}),[]);return Object(O.a)(Object(O.a)({},t),{},{setTotal:c,setTerpakai:i})}();return n.useEffect((function(){if(a.data){var e=de(a.data,"jumlah");c.setTotal(e)}}),[c,a.data]),n.useEffect((function(){if(t.data){var e=de(t.data,"dianggarkan");c.setTerpakai(e)}}),[c,t.data]),Object(k.jsxs)(l.a,{py:"12",px:"8",mt:"12",bgColor:"gray.50",borderWidth:"1px",borderColor:"gray.200",borderRadius:"lg",shadow:"base",fontSize:"4xl",fontWeight:"bold",color:"gray.500",children:[Object(k.jsx)(B.a.span,{fontWeight:"normal",color:"gray.300",children:"Rp"})," ",c.sisa,Object(k.jsx)(B.a.span,{fontWeight:"normal",color:"gray.300",children:",00"})]})}function le(e){switch(e){case 11:return"Desember";default:console.error("Bulan gak disupport")}}function be(){var e=Object(X.a)(["dana-bulan-ini"],Object(V.a)(U.a.mark((function e(){var a,t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z("/budget/bulan-ini");case 3:return a=e.sent,e.next=6,Z("/dana-line?budgetId=".concat(a.data.id));case 6:return t=e.sent,e.abrupt("return",t.data);case 10:throw e.prev=10,e.t0=e.catch(0),new Error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))),a=function(){var e=Object(X.a)(["budget-lines","Desember"],Object(V.a)(U.a.mark((function e(){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z("/budgetLine?bulan=Desember");case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))));return Object(O.a)(Object(O.a)({},e),{},{budgetLines:e.data})}(),t=11||(new Date).getMonth();return Object(k.jsxs)(l.a,{children:[Object(k.jsxs)(b.a,{flexDirection:"column",children:[Object(k.jsx)(oe,{mt:"12",children:le(t)}),Object(k.jsx)(je,{danaLines:e,budgetLines:a})]}),Object(k.jsx)(ie,{budgetLines:a})]})}function Oe(){var e=function(){var e=r.a.useState(!1),a=Object(T.a)(e,2),t=a[0],n=a[1],c=r.a.useState(null),i=Object(T.a)(c,2),s=i[0],u=i[1],o=Boolean(s)||(null===s||void 0===s?void 0:s.length)>0,d={akun:s};return r.a.useEffect((function(){o||t||(n(!0),Z("/akun").then((function(e){n(!1),u(e.data)}),(function(e){n(!1),console.log("Error:",e.message)})))}),[o,t]),{isLoading:t,isBudgetSiap:o,budgetSetupData:d,dispatch:function(e){return u(e)}}}(),a=e.isBudgetSiap,t=e.dispatch;return a?Object(k.jsx)(be,{}):Object(k.jsx)(L,{onSimpanAkun:function(e){return t(e)}})}function he(){var e=r.a.useState(null),a=Object(T.a)(e,2),t=a[0],n=a[1];return r.a.useEffect((function(){t||Z("/akun").then((function(e){n(e.data)}),(function(e){console.log("Tidak ada data. Pesan error:",e.message)}))}),[t]),Object(k.jsx)(p.a,{direction:"column",alignItems:"center",children:Object(k.jsxs)(l.a,{as:"main",width:"60%",mt:"24",pb:"12",borderRadius:"md",shadow:"base",bgColor:"white",children:[Object(k.jsx)(M.a,{m:"8",children:"+ Tambah Akun"}),Object(k.jsxs)(I.a,{children:[Object(k.jsx)(I.e,{children:Object(k.jsxs)(I.f,{children:[Object(k.jsx)(I.d,{children:"Akun"}),Object(k.jsx)(I.d,{children:"Jenis Akun"}),Object(k.jsx)(I.d,{isNumeric:!0,children:"Dana"})]})}),Object(k.jsx)(I.b,{children:null===t||void 0===t?void 0:t.map((function(e){var a=e.id,t=e.nama,n=e.jenis,r=e.dana;return Object(k.jsxs)(I.f,{children:[Object(k.jsx)(I.c,{children:t}),Object(k.jsx)(I.c,{children:n}),Object(k.jsx)(I.c,{isNumeric:!0,children:r})]},a)}))})]}),t&&0!==t.length?null:Object(k.jsxs)(b.a,{flexDir:"column",h:"250px",children:[Object(k.jsx)(A.a,{color:"gray.500",children:"Belum punya akun. Buat dulu ya."}),Object(k.jsx)(M.a,{m:"8",children:"+ Buat Akun"})]})]})})}function xe(){return"Dashboard"}function pe(){return Object(k.jsxs)(l.a,{className:"WkwkApp",bgColor:"gray.100",minH:"100vh",children:[Object(k.jsx)(y,{}),Object(k.jsxs)(j.c,{children:[Object(k.jsx)(j.a,{path:"/u/dashboard",children:Object(k.jsx)(xe,{})}),Object(k.jsx)(j.a,{path:"/u/budget",children:Object(k.jsx)(Oe,{})}),Object(k.jsx)(j.a,{path:"/u/dana",children:Object(k.jsx)(he,{})})]}),Object(k.jsxs)(b.a,{as:"footer",className:"footer",p:"40px",color:"gray.500",children:["\xa9\xa0",Object(k.jsx)("a",{href:"https://dev.sakitkepala.dev",children:"sakitkepala.dev"}),", 2021"]})]})}var fe=function(){return Object(k.jsx)(pe,{})},ge=new u.a;i.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(d.a,{children:Object(k.jsx)(o.a,{client:ge,children:Object(k.jsx)(s.a,{children:Object(k.jsx)(fe,{})})})})}),document.getElementById("root"))}},[[131,1,2]]]);
//# sourceMappingURL=main.5fe27a39.chunk.js.map